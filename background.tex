\section{what is an Environment?}
\label{SEC:background}

Before discussing aspects of an environment that can contribute to the
presence of bugs, it is important to clearly
define what an environment is.
An application's environment consists of
all of the
components an application depends upon that its developers do not control.
In practice, this is everything other than the code and data packaged
within the application itself.  Anything other than this code and data is
external to the application and can be
influenced in unexpected ways by the configuration of the
deployment environment.
For example, library search rules can result in system libraries being
loaded instead of versions of the same library that were
deployed alongside the
application.
These external resources can be thought of as
providing implicit inputs to the program that affect its flow of execution.
There are many examples of ways in which environments differ, even in
situations where they implement a ``standard interface,'' such as Java or
POSIX.
An investigation of bug reports has shown that environmental bugs in the
following categories have been found in major applications.

\begin{itemize}

\item {\bf Operating Systems.} Difference in the way operating systems
implement system call scan influence the behavior of applications.  For
example, on Linux it is possible to remove an open file, yet this is not
allowed on Windows systems~\cite{UnlinkStandard}.  An application
written without this difference in mind could fail if it relies on one
implementation or the other.

\item {\bf File Systems.}  The exact file system used will also have a
substantial impact on the behavior of a system, independent of the
operating system.  The popular Ext4 file system on Linux is case sensitive,
so that ``a'' and ``A'' are different files, while in OS X's HFS+ file system
those file names would refer to the same file.
File systems can have varying limits or behaviors for other items as well,
including file name length (popularized due to the 8.3 limitations of the
FAT file system), maximum file length, number of directory entries, or
depth
of directories supported, all of which lead to errors when programs
do not account for these issues~\cite{EXT4Layout, AppleHFS}.

\item {\bf Network.}  Aspects of the network environment, be it local or
remote, also have a
substantial impact on the behavior of an application.
For example, POSIX operating
systems support the notion of limiting the kernel buffer set aside for a
socket.  However, many other popular operating
systems (Windows, Linux, and Mac)
implement this quite differently.  For example, in Linux, if a UDP datagram
larger than the specified buffer size is received it will be dropped.  In
Windows, however, such
UDP datagrams are
received, but system calls that retrieve data from the buffer in which
they are
stored will only return a number of bytes less than or equal to the
buffer size at one time~\cite{Zhuang_NSDI_2014}.

\item {\bf Processor.}  The processor can also influence the
behavior of an application.  This is very frequently
evidenced through the variety of different floating point behaviors on
processors~\cite{ArbitraryPrecision}.  In addition, bugs are fairly common
in processors and cause variances, as does differences in interpreting
how to execute complex instructions~\cite{Microarch}.

\end{itemize}

In this work, we chose to focus on operating system,
file system, and network
environmental issues.
Specifically, we are concerned with issues from the above source that are
visible in the results an side effects of the system calls made by the
application.  In our evaluation we take a deeper look at anomalies from
these categories in order to assess CrashSimulator's effectiveness
at testing with them.
We leave processor-based environmental differences as such
bugs are being handled by other
work~\cite{Alglave:2018:FSC:3173162.3177156}.
